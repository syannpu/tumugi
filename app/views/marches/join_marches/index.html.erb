<h1 class="text-xl font-bold"><%= @marche.title %>の参加者管理</h1>
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
  <% @join_marches.each do |join_marche| %>
    <div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow">
      <!-- 参加者情報 -->
      <div class="p-10">
        <h3 class="text-xl font-bold"><%= join_marche.user.username %></h3>
        <p class="text-xl text-gray-600">申請日: <%= join_marche.created_at.strftime("%Y/%m/%d") %></p>
        <p class="text-xl">現在のステータス: 
          <span class="px-3 py-1 rounded bg-gray-100">
            <%= join_marche.approval_status_display %>
          </span>
        </p>
      </div>
      
      <!-- 個別の更新フォーム -->
      <%= form_with model: [@marche, join_marche], method: :patch, class: "status-update-form" do |form| %>
        <div class="flex items-center gap-3">
          <%= form.select :approval_status, 
              options_for_select([
                ['選定中', 'pending'],
                ['確定', 'approved'],
                ['お断り', 'rejected']
              ], join_marche.approval_status),
              {},
              { class: 'form-select border rounded px-3 py-1' } %>
          
          <%= form.submit "更新", 
              class: 'bg-blue-500 hover:bg-blue-600 text-white px-4 py-1 rounded transition-colors' %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<% if @join_marches.empty? %>
  <p class="text-2xl text-gray-600">参加申請はまだありません</p>
<% end %>