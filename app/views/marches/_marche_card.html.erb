<% return unless marche.present? %>

<div class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200">
  
  <!-- ç”»åƒè¡¨ç¤ºéƒ¨åˆ† -->
  <div class="relative w-full h-48 overflow-hidden rounded-t-lg bg-gray-200">
    <% if marche.images.present? %>
      <div class="image-slider" data-marche-id="<%= marche.id %>">
        <% marche.images.each_with_index do |image_uploader, index| %>
          <div class="slide <%= 'active' if index == 0 %>" 
               style="display: <%= index == 0 ? 'block' : 'none' %>;">
            <%= image_tag image_uploader.url, 
                class: "w-full h-48 object-cover transition-opacity duration-500",
                alt: "#{marche.title}ã®ç”»åƒ#{index + 1}" %>
          </div>
        <% end %>
      </div>
    <% else %>
      <!-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒ -->
      <div class="w-full h-48 bg-gray-200 flex items-center justify-center">
        <span class="text-gray-400 text-4xl">ğŸª</span>
      </div>
    <% end %>
  </div>
  
  <!-- ã‚«ãƒ¼ãƒ‰å†…å®¹ -->
  <div class="p-4">
    <h3 class="text-lg font-bold text-gray-800 mb-2">
      <%= link_to marche.title, marche_path(marche), 
          class: "hover:text-blue-600 transition-colors duration-200" %>
    </h3>
    
    <p class="text-gray-700 text-sm mb-3">
      <%= truncate(marche.body, length: 80) %>
    </p>
    
    <div class="text-gray-600 text-sm space-y-1">
      <p class="flex items-center">
        <span class="mr-2">ğŸ“</span>
        <%= marche.location %>
      </p>
      <p class="flex items-center">
        <span class="mr-2">ğŸ“…</span>
        <%= marche.start_at&.strftime("%m/%d %H:%M") %>
      </p>
    </div>
  </div>
</div>